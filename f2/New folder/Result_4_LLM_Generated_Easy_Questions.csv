,schema,model,question,sqlanswer,rating
0,"    
    CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, auto-incremented
    supplier_name VARCHAR(100) NOT NULL, -- Name of the supplier company or entity
    contact_info VARCHAR(100), -- Contact details (e.g., phone, email) of the supplier
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Date and time when the supplier record was created
);

CREATE TABLE drug_category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each drug category, auto-incremented
    category_name VARCHAR(50) NOT NULL -- Name of the drug category (e.g., Antibiotics, Painkillers)
);

CREATE TABLE drug (
    drug_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each drug, auto-incremented
    category_id INT, -- ID of the category this drug belongs to
    drug_name VARCHAR(100) NOT NULL, -- Name of the drug (e.g., Amoxicillin)
    manufacturer VARCHAR(100), -- Name of the company that produces the drug
    price DECIMAL(10,2), -- Price per unit of the drug
    stock INT -- Current stock quantity of the drug in inventory
);

CREATE TABLE pharmacy (
    pharmacy_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each pharmacy, auto-incremented
    pharmacy_name VARCHAR(100) NOT NULL, -- Name of the pharmacy
    location VARCHAR(100), -- Physical location or address of the pharmacy
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Date and time when the pharmacy record was created
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, auto-incremented
    pharmacy_id INT, -- ID of the pharmacy where the employee works
    first_name VARCHAR(50), -- Employee's first name
    last_name VARCHAR(50), -- Employee's last name
    role VARCHAR(50) -- Employee's job role (e.g., Pharmacist, Cashier)
);

CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, auto-incremented
    pharmacy_id INT, -- ID of the pharmacy where the sale occurred
    employee_id INT, -- ID of the employee who made the sale
    sale_date DATE, -- Date the sale took place
    total_amount DECIMAL(10,2) -- Total monetary amount of the sale
);

CREATE TABLE sale_details (
    sale_detail_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale detail entry, auto-incremented
    sale_id INT, -- ID of the sale this detail belongs to
    drug_id INT, -- ID of the drug sold
    quantity INT, -- Number of units of the drug sold
    subtotal DECIMAL(10,2) -- Total cost for this drug in the sale (quantity * price)
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, auto-incremented
    drug_id INT, -- ID of the drug being tracked
    supplier_id INT, -- ID of the supplier providing the drug
    stock_level INT, -- Current stock level of the drug from this supplier
    last_updated DATE -- Date when the stock level was last updated
);

CREATE TABLE prescription (
    prescription_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each prescription, auto-incremented
    sale_id INT, -- ID of the sale associated with this prescription
    doctor_name VARCHAR(100), -- Name of the doctor who issued the prescription
    prescription_date DATE -- Date the prescription was issued
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, auto-incremented
    pharmacy_id INT, -- ID of the pharmacy receiving the feedback
    rating INT CHECK (rating >= 1 AND rating <= 5), -- Customer rating (1 to 5 stars)
    comments TEXT, -- Customer comments or notes
    feedback_date DATE -- Date the feedback was submitted
);",llama3.2:3b,"[""Write a SQL query to identify all pharmacies that have provided feedback with a rating of 5 and also sell drugs that belong to the 'Antibiotics' category. Return the pharmacy names and the average rating given by those pharmacies. Use appropriate joins and aliases to achieve this.\n""]","SELECT T1.pharmacy_name ,  AVG(T2.rating) FROM pharmacy AS T1 JOIN feedback AS T2 ON T1.pharmacy_id = T2.pharmacy_id INNER JOIN sale_details AS T3 ON T2.pharmacy_id = T3.pharmacy_id INNER JOIN drug AS T4 ON T3.drug_id = T4.drug_id WHERE T4.category_name = 'Antibiotics' GROUP BY T1.pharmacy_name;",7
1,"CREATE TABLE store (
    store_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each store, automatically incremented
    store_name VARCHAR(50) NOT NULL, -- Name of the store
    location VARCHAR(100) -- Physical location or address of the store
);

CREATE TABLE department (
    department_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each department, automatically incremented
    department_name VARCHAR(50) NOT NULL -- Name of the department (e.g., Electronics, Clothing)
);

CREATE TABLE category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product category, automatically incremented
    category_name VARCHAR(50) NOT NULL -- Name of the product category (e.g., TVs, Shirts)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    category_id INT, -- ID of the category this product belongs to
    product_name VARCHAR(100), -- Name of the product (e.g., ""LED TV 55-inch"")
    price DECIMAL(10,2), -- Price per unit of the product
    FOREIGN KEY (category_id) REFERENCES category(category_id) -- Links to category table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    store_id INT, -- ID of the store where the employee works
    department_id INT, -- ID of the department the employee is assigned to
    first_name VARCHAR(50), -- Employee's first name
    last_name VARCHAR(50), -- Employee's last name
    FOREIGN KEY (store_id) REFERENCES store(store_id), -- Links to store table
    FOREIGN KEY (department_id) REFERENCES department(department_id) -- Links to department table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    email VARCHAR(100) -- Customer's email address
);

CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    store_id INT, -- ID of the store where the sale occurred
    employee_id INT, -- ID of the employee who processed the sale
    customer_id INT, -- ID of the customer who made the purchase
    sale_date DATETIME, -- Date and time when the sale took place
    total_amount DECIMAL(10,2), -- Total monetary amount of the sale
    FOREIGN KEY (store_id) REFERENCES store(store_id), -- Links to store table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id), -- Links to employee table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);

CREATE TABLE sale_items (
    sale_item_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale item, automatically incremented
    sale_id INT, -- ID of the sale this item belongs to
    product_id INT, -- ID of the product sold
    quantity INT, -- Number of units of the product sold
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific product in the sale
    FOREIGN KEY (sale_id) REFERENCES sales(sale_id), -- Links to sales table
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE stock (
    stock_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each stock record, automatically incremented
    product_id INT, -- ID of the product being tracked
    store_id INT, -- ID of the store holding this stock
    quantity INT, -- Current stock quantity of the product at the store
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (store_id) REFERENCES store(store_id) -- Links to store table
);






-- product.category_id can be joined with category.category_id -- Connects each product to its category.
-- employee.store_id can be joined with store.store_id -- Associates employees with the store they work at.
-- employee.department_id can be joined with department.department_id -- Links employees to their assigned department.
-- sales.store_id can be joined with store.store_id -- Ties sales to the store where they occurred.
-- sales.employee_id can be joined with employee.employee_id -- Connects sales to the employee who processed them.
-- sales.customer_id can be joined with customer.customer_id -- Links sales to the customer who made the purchase.
-- sale_items.sale_id can be joined with sales.sale_id -- Associates sale items with their corresponding sale.
-- sale_items.product_id can be joined with product.product_id -- Connects sale items to the specific product sold.
-- stock.product_id can be joined with product.product_id -- Ties stock records to the products they track.
-- stock.store_id can be joined with store.store_id -- Links stock records to the store holding the inventory.",llama3.2:3b,"['   Generate a SQL query to determine the total revenue generated by each store, ranked in descending order based on that revenue. The query should include the store name and the total revenue for each store.  Use aliases to improve readability and ensure the query accurately reflects the desired output.\n']","SELECT T1.store_name, SUM(T3.subtotal) / COUNT(T3.sale_item_id) AS total_revenue FROM store AS T1 JOIN sales AS T2 ON T1.store_id = T2.store_id JOIN sale_items AS T3 ON T2.sale_id = T3.sale_id GROUP BY T1.store_name ORDER BY total_revenue DESC;",6
2,"CREATE TABLE user (
    user_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each user, automatically incremented
    username VARCHAR(50) UNIQUE, -- Unique username chosen by the user
    email VARCHAR(100), -- User's email address
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Date and time when the user account was created
);

CREATE TABLE category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product category, automatically incremented
    category_name VARCHAR(50) -- Name of the product category (e.g., Electronics, Clothing)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    category_id INT, -- ID of the category this product belongs to
    product_name VARCHAR(100), -- Name of the product (e.g., ""Wireless Mouse"")
    price DECIMAL(10,2), -- Price per unit of the product
    stock INT -- Current stock quantity of the product
    FOREIGN KEY (category_id) REFERENCES category(category_id) -- Links to category table
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    user_id INT, -- ID of the user who placed the order
    order_date DATETIME, -- Date and time when the order was placed
    status ENUM('PENDING', 'SHIPPED', 'DELIVERED'), -- Current status of the order
    total_amount DECIMAL(10,2), -- Total monetary amount of the order
    FOREIGN KEY (user_id) REFERENCES user(user_id) -- Links to user table
);

CREATE TABLE order_item (
    order_item_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order item, automatically incremented
    order_id INT, -- ID of the order this item belongs to
    product_id INT, -- ID of the product ordered
    quantity INT, -- Number of units of the product ordered
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific product in the order
    FOREIGN KEY (order_id) REFERENCES order_(order_id), -- Links to order_ table
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE payment (
    payment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each payment, automatically incremented
    order_id INT, -- ID of the order associated with this payment
    amount DECIMAL(10,2), -- Amount paid for the order
    payment_date DATETIME, -- Date and time when the payment was made
    method ENUM('CARD', 'PAYPAL', 'COD'), -- Payment method used (Credit Card, PayPal, Cash on Delivery)
    FOREIGN KEY (order_id) REFERENCES order_(order_id) -- Links to order_ table
);

CREATE TABLE shipping (
    shipping_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each shipping record, automatically incremented
    order_id INT, -- ID of the order being shipped
    shipping_date DATE, -- Date when the order was shipped
    tracking_number VARCHAR(50), -- Tracking number for the shipment
    FOREIGN KEY (order_id) REFERENCES order_(order_id) -- Links to order_ table
);

CREATE TABLE review (
    review_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each review, automatically incremented
    product_id INT, -- ID of the product being reviewed
    user_id INT, -- ID of the user who wrote the review
    rating INT, -- Rating given by the user (e.g., 1 to 5)
    comment TEXT, -- Text comment or feedback about the product
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (user_id) REFERENCES user(user_id) -- Links to user table
);



-- product.category_id can be joined with category.category_id -- Connects each product to its category.
-- order_.user_id can be joined with user.user_id -- Ties orders to the user who placed them.
-- order_item.order_id can be joined with order_.order_id -- Links order items to their corresponding order.
-- order_item.product_id can be joined with product.product_id -- Connects order items to the specific product ordered.
-- payment.order_id can be joined with order_.order_id -- Associates payments with the order they cover.
-- shipping.order_id can be joined with order_.order_id -- Links shipping records to the order being shipped.
-- review.product_id can be joined with product.product_id -- Ties reviews to the product being reviewed.
-- review.user_id can be joined with user.user_id -- Connects reviews to the user who wrote them.",llama3.2:3b,"['  \n   Generate a SQL query to determine the average order value for each product category, including the category name and the average total amount of all orders containing products from that category.  Present the results sorted in descending order of the average order value. Use appropriate aliases to enhance readability.\n']","SELECT 
    c.category_name,
    AVG(ti.subtotal) AS avg_order_value
FROM 
    order_ o
JOIN 
    order_item oi ON o.order_id = oi.order_id
JOIN 
    product p ON oi.product_id = p.product_id
JOIN 
    category c ON p.category_id = c.category_id
GROUP BY 
    c.category_name
ORDER BY 
    avg_order_value DESC;",9
3,"CREATE TABLE agent (
    agent_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each agent, automatically incremented
    first_name VARCHAR(50), -- Agent's first name
    last_name VARCHAR(50), -- Agent's last name
    phone VARCHAR(20) -- Agent's phone number
);

CREATE TABLE property_type (
    type_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each property type, automatically incremented
    type_name VARCHAR(50) NOT NULL -- Name of the property type (e.g., House, Apartment)
);

CREATE TABLE property (
    property_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each property, automatically incremented
    type_id INT, -- ID of the property type this property belongs to
    address TEXT, -- Full address of the property
    price DECIMAL(12,2), -- Listed price of the property
    status ENUM('AVAILABLE', 'SOLD', 'PENDING'), -- Current status of the property
    FOREIGN KEY (type_id) REFERENCES property_type(type_id) -- Links to property_type table
);

CREATE TABLE client (
    client_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each client, automatically incremented
    first_name VARCHAR(50), -- Client's first name
    last_name VARCHAR(50), -- Client's last name
    email VARCHAR(100) -- Client's email address
);

CREATE TABLE sale (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    property_id INT, -- ID of the property sold
    agent_id INT, -- ID of the agent who facilitated the sale
    client_id INT, -- ID of the client who purchased the property
    sale_date DATE, -- Date when the sale was completed
    sale_price DECIMAL(12,2), -- Final sale price of the property
    FOREIGN KEY (property_id) REFERENCES property(property_id), -- Links to property table
    FOREIGN KEY (agent_id) REFERENCES agent(agent_id), -- Links to agent table
    FOREIGN KEY (client_id) REFERENCES client(client_id) -- Links to client table
);

CREATE TABLE commission (
    commission_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each commission record, automatically incremented
    sale_id INT, -- ID of the sale this commission is tied to
    agent_id INT, -- ID of the agent receiving the commission
    amount DECIMAL(10,2), -- Commission amount earned by the agent
    FOREIGN KEY (sale_id) REFERENCES sale(sale_id), -- Links to sale table
    FOREIGN KEY (agent_id) REFERENCES agent(agent_id) -- Links to agent table
);

CREATE TABLE appointment (
    appointment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each appointment, automatically incremented
    agent_id INT, -- ID of the agent conducting the appointment
    client_id INT, -- ID of the client attending the appointment
    property_id INT, -- ID of the property being shown or discussed
    appointment_date DATETIME, -- Date and time of the appointment
    FOREIGN KEY (agent_id) REFERENCES agent(agent_id), -- Links to agent table
    FOREIGN KEY (client_id) REFERENCES client(client_id), -- Links to client table
    FOREIGN KEY (property_id) REFERENCES property(property_id) -- Links to property table
);

CREATE TABLE expense (
    expense_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each expense record, automatically incremented
    property_id INT, -- ID of the property associated with the expense
    amount DECIMAL(10,2), -- Amount of the expense
    description TEXT, -- Details or reason for the expense (e.g., repairs, marketing)
    expense_date DATE, -- Date when the expense was incurred
    FOREIGN KEY (property_id) REFERENCES property(property_id) -- Links to property table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    client_id INT, -- ID of the client providing the feedback
    rating INT, -- Rating given by the client (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the client
    FOREIGN KEY (client_id) REFERENCES client(client_id) -- Links to client table
);


-- property.type_id can be joined with property_type.type_id -- Connects each property to its type.
-- sale.property_id can be joined with property.property_id -- Ties sales to the property sold.
-- sale.agent_id can be joined with agent.agent_id -- Links sales to the agent who facilitated them.
-- sale.client_id can be joined with client.client_id -- Connects sales to the client who purchased the property.
-- commission.sale_id can be joined with sale.sale_id -- Associates commissions with their corresponding sale.
-- commission.agent_id can be joined with agent.agent_id -- Links commissions to the agent receiving them.
-- appointment.agent_id can be joined with agent.agent_id -- Ties appointments to the agent conducting them.
-- appointment.client_id can be joined with client.client_id -- Connects appointments to the client attending them.
-- appointment.property_id can be joined with property.property_id -- Links appointments to the property being shown.
-- expense.property_id can be joined with property.property_id -- Associates expenses with the property they relate to.
-- feedback.client_id can be joined with client.client_id -- Connects feedback to the client providing it.",llama3.2:3b,"[""  \n   Generate a SQL query to determine the average commission amount earned by agents who facilitated sales of properties located in a specific city (assuming a `city` column exists within the `property` table).  The query should also display the agent's first name and last name, and the total number of sales they facilitated during the same period. Use aliases to improve readability.  The period is defined as sales occurring between '2023-01-01' and '2023-12-31'.\n""]","SELECT 
  a.first_name,
  a.last_name,
  AVG(c.amount) AS average_commission
FROM 
  commission c 
  JOIN sale s ON c.sale_id = s.sale_id 
  JOIN agent a ON c.agent_id = a.agent_id 
WHERE 
  s.sale_date BETWEEN '2023-01-01' AND '2023-12-31'
GROUP BY 
  a.first_name, a.last_name",7
4,"CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, automatically incremented
    supplier_name VARCHAR(100), -- Name of the supplier company or entity
    contact VARCHAR(100) -- Contact information for the supplier (e.g., phone, email)
);

CREATE TABLE raw_material (
    material_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each raw material, automatically incremented
    material_name VARCHAR(100), -- Name of the raw material (e.g., Steel, Cotton)
    unit_cost DECIMAL(10,2) -- Cost per unit of the raw material
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    product_name VARCHAR(100), -- Name of the product (e.g., ""Steel Table"")
    sale_price DECIMAL(10,2) -- Price at which the product is sold per unit
);

CREATE TABLE production (
    production_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each production batch, automatically incremented
    product_id INT, -- ID of the product being produced
    production_date DATE, -- Date when the production occurred
    quantity INT, -- Number of units produced in this batch
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    role VARCHAR(50) -- Employee's job role (e.g., Salesperson, Production Worker)
);

CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    product_id INT, -- ID of the product sold
    employee_id INT, -- ID of the employee who made the sale
    sale_date DATE, -- Date when the sale took place
    quantity_sold INT, -- Number of units sold
    total_amount DECIMAL(10,2), -- Total monetary amount of the sale
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, automatically incremented
    material_id INT, -- ID of the raw material being tracked
    stock_level INT, -- Current stock quantity of the raw material
    FOREIGN KEY (material_id) REFERENCES raw_material(material_id) -- Links to raw_material table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    company_name VARCHAR(100), -- Name of the customer company or entity
    contact VARCHAR(100) -- Contact information for the customer (e.g., phone, email)
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    customer_id INT, -- ID of the customer who placed the order
    sale_id INT, -- ID of the sale associated with this order
    order_date DATE, -- Date when the order was placed
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (sale_id) REFERENCES sales(sale_id) -- Links to sales table
);


-- production.product_id can be joined with product.product_id -- Connects production batches to the product being produced.
-- sales.product_id can be joined with product.product_id -- Ties sales to the product sold.
-- sales.employee_id can be joined with employee.employee_id -- Links sales to the employee who made them.
-- inventory.material_id can be joined with raw_material.material_id -- Associates inventory records with the raw materials they track.
-- order_.customer_id can be joined with customer.customer_id -- Connects orders to the customer who placed them.
-- order_.sale_id can be joined with sales.sale_id -- Links orders to their corresponding sale.",llama3.2:3b,"[""Generate a report showing the total sales revenue for each product, along with the employee who made the sale and the customer who placed the order for that sale. The report should also include the product name, sale price, total amount, employee's first name, employee's role, customer's company name, and the sale date. Use appropriate joins and aliases to connect the `sales`, `product`, `employee`, `customer`, and `order_` tables.  The output should be sorted by total sales revenue in descending order.\n""]","SELECT 
  p.product_name, 
  s.sale_price, 
  s.total_amount, 
  e.first_name AS employee_first_name, 
  e.role AS employee_role, 
  c.company_name AS customer_company_name,
  o.order_date,
  COALESCE(s.quantity_sold * s.sale_price, 0) AS total_sales_revenue
FROM 
  sales s
JOIN 
  product p ON s.product_id = p.product_id
JOIN 
  employee e ON s.employee_id = e.employee_id
JOIN 
  customer c ON o.customer_id = c.customer_id
JOIN 
  order_ o ON s.sale_id = o.sale_id AND o.order_date <= s.sale_date
LEFT JOIN 
  (SELECT sale_id, SUM(quantity_sold * sale_price) AS total_amount FROM sales GROUP BY sale_id) sub ON s.sale_id = sub.sale_id
LEFT JOIN 
  inventory i ON s.product_id = i.material_id AND s.quantity_sold = i.stock_level
ORDER BY 
  total_sales_revenue DESC",6
5,"CREATE TABLE restaurant (
    restaurant_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each restaurant, automatically incremented
    name VARCHAR(100), -- Name of the restaurant
    location VARCHAR(100) -- Physical location or address of the restaurant
);

CREATE TABLE menu_category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each menu category, automatically incremented
    category_name VARCHAR(50) -- Name of the menu category (e.g., Appetizers, Desserts)
);

CREATE TABLE menu_item (
    item_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each menu item, automatically incremented
    category_id INT, -- ID of the category this menu item belongs to
    item_name VARCHAR(100), -- Name of the menu item (e.g., ""Chicken Wings"")
    price DECIMAL(10,2), -- Price of the menu item
    FOREIGN KEY (category_id) REFERENCES menu_category(category_id) -- Links to menu_category table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    restaurant_id INT, -- ID of the restaurant where the employee works
    first_name VARCHAR(50), -- Employee's first name
    role VARCHAR(50) -- Employee's job role (e.g., Waiter, Chef)
    FOREIGN KEY (restaurant_id) REFERENCES restaurant(restaurant_id) -- Links to restaurant table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    email VARCHAR(100) -- Customer's email address
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    restaurant_id INT, -- ID of the restaurant where the order was placed
    employee_id INT, -- ID of the employee who processed the order
    customer_id INT, -- ID of the customer who placed the order
    order_date DATETIME, -- Date and time when the order was placed
    total_amount DECIMAL(10,2), -- Total monetary amount of the order
    FOREIGN KEY (restaurant_id) REFERENCES restaurant(restaurant_id), -- Links to restaurant table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id), -- Links to employee table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);

CREATE TABLE order_detail (
    order_detail_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order detail, automatically incremented
    order_id INT, -- ID of the order this detail belongs to
    item_id INT, -- ID of the menu item ordered
    quantity INT, -- Number of units of the menu item ordered
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific menu item in the order
    FOREIGN KEY (order_id) REFERENCES order_(order_id), -- Links to order_ table
    FOREIGN KEY (item_id) REFERENCES menu_item(item_id) -- Links to menu_item table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    customer_id INT, -- ID of the customer providing the feedback
    restaurant_id INT, -- ID of the restaurant being reviewed
    rating INT, -- Rating given by the customer (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the customer
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (restaurant_id) REFERENCES restaurant(restaurant_id) -- Links to restaurant table
);


-- menu_item.category_id can be joined with menu_category.category_id -- Connects each menu item to its category.
-- employee.restaurant_id can be joined with restaurant.restaurant_id -- Ties employees to the restaurant they work at.
-- order_.restaurant_id can be joined with restaurant.restaurant_id -- Links orders to the restaurant where they were placed.
-- order_.employee_id can be joined with employee.employee_id -- Connects orders to the employee who processed them.
-- order_.customer_id can be joined with customer.customer_id -- Associates orders with the customer who placed them.
-- order_detail.order_id can be joined with order_.order_id -- Ties order details to their corresponding order.
-- order_detail.item_id can be joined with menu_item.item_id -- Links order details to the specific menu item ordered.
-- feedback.customer_id can be joined with customer.customer_id -- Connects feedback to the customer providing it.
-- feedback.restaurant_id can be joined with restaurant.restaurant_id -- Associates feedback with the restaurant being reviewed.",llama3.2:3b,"['Write a SQL query to identify all restaurants that have received at least five positive feedback ratings (rating of 4 or 5) from customers, along with the average rating given by those customers. Use aliases to clearly distinguish between tables and columns in your query.\n']","SELECT r.name, AVG(f.rating) AS avg_rating 
FROM restaurant r
JOIN order_ o ON r.restaurant_id = o.restaurant_id
JOIN employee e ON o.employee_id = e.employee_id
JOIN customer c ON o.customer_id = c.customer_id
JOIN feedback f ON c.customer_id = f.customer_id AND r.restaurant_id = f.restaurant_id
WHERE SUM(CASE WHEN f.rating < 4 THEN 1 ELSE 0 END) >= 5
GROUP BY r.name",2
6,"CREATE TABLE vehicle_type (
    type_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each vehicle type, automatically incremented
    type_name VARCHAR(50) -- Name of the vehicle type (e.g., Sedan, Truck)
);

CREATE TABLE vehicle (
    vehicle_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each vehicle, automatically incremented
    type_id INT, -- ID of the vehicle type this vehicle belongs to
    model VARCHAR(100), -- Model name of the vehicle (e.g., ""Camry"")
    manufacturer VARCHAR(50), -- Name of the vehicle manufacturer (e.g., ""Toyota"")
    price DECIMAL(12,2), -- Price of the vehicle
    stock INT, -- Current stock quantity of the vehicle
    FOREIGN KEY (type_id) REFERENCES vehicle_type(type_id) -- Links to vehicle_type table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    last_name VARCHAR(50), -- Customer's last name
    email VARCHAR(100) -- Customer's email address
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    last_name VARCHAR(50), -- Employee's last name
    role VARCHAR(50) -- Employee's job role (e.g., Salesperson, Mechanic)
);

CREATE TABLE sale (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    vehicle_id INT, -- ID of the vehicle sold
    customer_id INT, -- ID of the customer who purchased the vehicle
    employee_id INT, -- ID of the employee who facilitated the sale
    sale_date DATE, -- Date when the sale occurred
    sale_price DECIMAL(12,2), -- Final sale price of the vehicle
    FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id), -- Links to vehicle table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE service (
    service_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each service record, automatically incremented
    vehicle_id INT, -- ID of the vehicle being serviced
    customer_id INT, -- ID of the customer requesting the service
    service_date DATE, -- Date when the service was performed
    cost DECIMAL(10,2), -- Cost of the service
    FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id), -- Links to vehicle table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);

CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, automatically incremented
    supplier_name VARCHAR(100), -- Name of the supplier company or entity
    contact VARCHAR(100) -- Contact information for the supplier (e.g., phone, email)
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, automatically incremented
    vehicle_id INT, -- ID of the vehicle being tracked
    supplier_id INT, -- ID of the supplier providing the vehicle
    stock_level INT, -- Current stock level of the vehicle
    FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id), -- Links to vehicle table
    FOREIGN KEY (supplier_id) REFERENCES supplier(supplier_id) -- Links to supplier table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    customer_id INT, -- ID of the customer providing the feedback
    rating INT, -- Rating given by the customer (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the customer
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);




-- vehicle.type_id can be joined with vehicle_type.type_id -- Connects each vehicle to its type.
-- sale.vehicle_id can be joined with vehicle.vehicle_id -- Ties sales to the vehicle sold.
-- sale.customer_id can be joined with customer.customer_id -- Links sales to the customer who purchased the vehicle.
-- sale.employee_id can be joined with employee.employee_id -- Associates sales with the employee who facilitated them.
-- service.vehicle_id can be joined with vehicle.vehicle_id -- Connects service records to the vehicle being serviced.
-- service.customer_id can be joined with customer.customer_id -- Links service records to the customer requesting them.
-- inventory.vehicle_id can be joined with vehicle.vehicle_id -- Ties inventory records to the vehicle being tracked.
-- inventory.supplier_id can be joined with supplier.supplier_id -- Associates inventory with the supplier providing the vehicle.
-- feedback.customer_id can be joined with customer.customer_id -- Connects feedback to the customer providing it.-- ",llama3.2:3b,"['  \n   Generate a SQL query to determine the total revenue generated by each vehicle type, considering only sales made between January 1, 2023, and December 31, 2023. The query should rank the vehicle types based on their total revenue, with the highest revenue vehicle type appearing first. Use appropriate aliases to enhance readability and ensure accurate results.\n']","SELECT 
    vtype.type_name,
    SUM(s.sale_price) AS total_revenue
FROM 
    sale s
JOIN 
    vehicle v ON s.vehicle_id = v.vehicle_id
JOIN 
    customer c ON s.customer_id = c.customer_id
JOIN 
    inventory i ON v.vehicle_id = i.vehicle_id
JOIN 
    supplier sup ON i.supplier_id = sup.supplier_id
JOIN 
    vehicle_type vtype ON v.type_id = vtype.type_id
WHERE 
    YEAR(s.sale_date) BETWEEN 2023 AND 2023
GROUP BY 
    vtype.type_name
ORDER BY 
    total_revenue DESC",9
7,"CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    email VARCHAR(100) UNIQUE -- Customer's unique email address
);

CREATE TABLE plan (
    plan_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each subscription plan, automatically incremented
    plan_name VARCHAR(50), -- Name of the plan (e.g., ""Basic"", ""Premium"")
    monthly_price DECIMAL(10,2) -- Monthly cost of the plan
);

CREATE TABLE subscription (
    subscription_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each subscription, automatically incremented
    customer_id INT, -- ID of the customer who subscribed
    plan_id INT, -- ID of the plan subscribed to
    start_date DATE, -- Date when the subscription began
    end_date DATE, -- Date when the subscription ends (if applicable)
    status ENUM('ACTIVE', 'CANCELLED'), -- Current status of the subscription
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (plan_id) REFERENCES plan(plan_id) -- Links to plan table
);

CREATE TABLE payment (
    payment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each payment, automatically incremented
    subscription_id INT, -- ID of the subscription this payment is for
    amount DECIMAL(10,2), -- Amount paid
    payment_date DATE, -- Date when the payment was made
    method ENUM('CARD', 'PAYPAL', 'BANK'), -- Payment method used (Credit Card, PayPal, Bank Transfer)
    FOREIGN KEY (subscription_id) REFERENCES subscription(subscription_id) -- Links to subscription table
);

CREATE TABLE usage (
    usage_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each usage record, automatically incremented
    subscription_id INT, -- ID of the subscription this usage pertains to
    usage_date DATE, -- Date when the usage was recorded
    metric_value INT, -- Measured value of usage (e.g., data in MB, minutes used)
    FOREIGN KEY (subscription_id) REFERENCES subscription(subscription_id) -- Links to subscription table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    role VARCHAR(50) -- Employee's job role (e.g., Support Agent, Manager)
);

CREATE TABLE support_ticket (
    ticket_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each support ticket, automatically incremented
    customer_id INT, -- ID of the customer who raised the ticket
    employee_id INT, -- ID of the employee handling the ticket
    issue TEXT, -- Description of the customer's issue
    status ENUM('OPEN', 'CLOSED'), -- Current status of the ticket
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    customer_id INT, -- ID of the customer providing the feedback
    rating INT, -- Rating given by the customer (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the customer
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);



-- subscription.customer_id can be joined with customer.customer_id -- Connects subscriptions to the customer who subscribed.
-- subscription.plan_id can be joined with plan.plan_id -- Links subscriptions to the specific plan subscribed to.
-- payment.subscription_id can be joined with subscription.subscription_id -- Ties payments to their corresponding subscription.
-- usage.subscription_id can be joined with subscription.subscription_id -- Associates usage records with the subscription they pertain to.
-- support_ticket.customer_id can be joined with customer.customer_id -- Links support tickets to the customer who raised them.
-- support_ticket.employee_id can be joined with employee.employee_id -- Connects support tickets to the employee handling them.
-- feedback.customer_id can be joined with customer.customer_id -- Ties feedback to the customer providing it.-- ",llama3.2:3b,"[""Write a SQL query to identify the top 3 customers who have spent the most money on subscriptions, considering only active subscriptions. The query should return the customer's first name, email, and the total amount spent on subscriptions. Use aliases to clarify column names and join the `subscription`, `payment`, and `customer` tables. Order the results by the total amount spent in descending order.\n""]","SELECT 
    c.first_name, 
    c.email,
    SUM(p.amount) AS total_amount_spent
FROM 
    subscription s
JOIN 
    customer c ON s.customer_id = c.customer_id
JOIN 
    payment p ON s.subscription_id = p.subscription_id
WHERE 
    s.status = 'ACTIVE'
GROUP BY 
    c.first_name, c.email
ORDER BY 
    total_amount_spent DESC
LIMIT 3",8
8,"CREATE TABLE warehouse (
    warehouse_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each warehouse, automatically incremented
    location VARCHAR(100), -- Physical location or address of the warehouse
    capacity INT -- Maximum storage capacity of the warehouse (e.g., in units or volume)
);

CREATE TABLE product_category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product category, automatically incremented
    category_name VARCHAR(50) -- Name of the product category (e.g., Electronics, Furniture)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    category_id INT, -- ID of the category this product belongs to
    product_name VARCHAR(100), -- Name of the product (e.g., ""LED TV"")
    wholesale_price DECIMAL(10,2), -- Wholesale price per unit of the product
    FOREIGN KEY (category_id) REFERENCES product_category(category_id) -- Links to product_category table
);

CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, automatically incremented
    supplier_name VARCHAR(100), -- Name of the supplier company or entity
    contact VARCHAR(100) -- Contact information for the supplier (e.g., phone, email)
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    company_name VARCHAR(100), -- Name of the customer company or entity
    contact VARCHAR(100) -- Contact information for the customer (e.g., phone, email)
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    warehouse_id INT, -- ID of the warehouse where the employee works
    role VARCHAR(50), -- Employee's job role (e.g., Warehouse Manager, Order Picker)
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(warehouse_id) -- Links to warehouse table
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    customer_id INT, -- ID of the customer who placed the order
    warehouse_id INT, -- ID of the warehouse fulfilling the order
    employee_id INT, -- ID of the employee who processed the order
    order_date DATE, -- Date when the order was placed
    total_amount DECIMAL(10,2), -- Total monetary amount of the order
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(warehouse_id), -- Links to warehouse table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE order_detail (
    order_detail_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order detail, automatically incremented
    order_id INT, -- ID of the order this detail belongs to
    product_id INT, -- ID of the product ordered
    quantity INT, -- Number of units of the product ordered
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific product in the order
    FOREIGN KEY (order_id) REFERENCES order_(order_id), -- Links to order_ table
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, automatically incremented
    product_id INT, -- ID of the product being tracked
    warehouse_id INT, -- ID of the warehouse storing the product
    supplier_id INT, -- ID of the supplier providing the product
    stock_level INT, -- Current stock quantity of the product in the warehouse
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(warehouse_id), -- Links to warehouse table
    FOREIGN KEY (supplier_id) REFERENCES supplier(supplier_id) -- Links to supplier table
);

CREATE TABLE shipment (
    shipment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each shipment, automatically incremented
    order_id INT, -- ID of the order being shipped
    shipment_date DATE, -- Date when the shipment was sent
    tracking_number VARCHAR(50), -- Tracking number for the shipment
    FOREIGN KEY (order_id) REFERENCES order_(order_id) -- Links to order_ table
);




-- product.category_id can be joined with product_category.category_id -- Connects each product to its category.
-- employee.warehouse_id can be joined with warehouse.warehouse_id -- Ties employees to the warehouse they work at.
-- order_.customer_id can be joined with customer.customer_id -- Links orders to the customer who placed them.
-- order_.warehouse_id can be joined with warehouse.warehouse_id -- Associates orders with the warehouse fulfilling them.
-- order_.employee_id can be joined with employee.employee_id -- Connects orders to the employee who processed them.
-- order_detail.order_id can be joined with order_.order_id -- Ties order details to their corresponding order.
-- order_detail.product_id can be joined with product.product_id -- Links order details to the specific product ordered.
-- inventory.product_id can be joined with product.product_id -- Associates inventory records with the product being tracked.
-- inventory.warehouse_id can be joined with warehouse.warehouse_id -- Connects inventory to the warehouse storing it.
-- inventory.supplier_id can be joined with supplier.supplier_id -- Links inventory to the supplier providing the product.
-- shipment.order_id can be joined with order_.order_id -- Ties shipments to the order being shipped.-- ",llama3.2:3b,"[""Write a SQL query to identify all products that have been ordered more than 5 times and are stocked in warehouses located in 'New York'. Return the product names and the number of times each product has been ordered.  Use aliases to clarify the table names in your query.\n""]","SELECT p.product_name, COUNT(od.order_detail_id) AS num_orders 
FROM product_category pc
JOIN product p ON pc.category_id = p.category_id
JOIN order_ o ON p.product_id = o.product_id
JOIN inventory i ON p.product_id = i.product_id
JOIN warehouse w ON i.warehouse_id = w.warehouse_id
WHERE w.location = 'New York' AND i.stock_level > 5 GROUP BY p.product_name;",6
9,"    CREATE TABLE products (
    product_id INTEGER PRIMARY KEY, -- Unique ID for each product
    name VARCHAR(50), -- Name of the product
    price DECIMAL(10,2), -- Price of each unit of the product
    quantity INTEGER  -- Current quantity in stock
    );

    CREATE TABLE customers (
    customer_id INTEGER PRIMARY KEY, -- Unique ID for each customer
    name VARCHAR(50), -- Name of the customer
    address VARCHAR(100) -- Mailing address of the customer
    );

    CREATE TABLE salespeople (
    salesperson_id INTEGER PRIMARY KEY, -- Unique ID for each salesperson
    name VARCHAR(50), -- Name of the salesperson
    region VARCHAR(50) -- Geographic sales region
    );

    CREATE TABLE sales (
    sale_id INTEGER PRIMARY KEY, -- Unique ID for each sale
    product_id INTEGER, -- ID of product sold
    customer_id INTEGER,  -- ID of customer who made purchase
    salesperson_id INTEGER, -- ID of salesperson who made the sale
    sale_date DATE, -- Date the sale occurred
    quantity INTEGER -- Quantity of product sold
    );

    CREATE TABLE product_suppliers (
    supplier_id INTEGER PRIMARY KEY, -- Unique ID for each supplier
    product_id INTEGER, -- Product ID supplied
    supply_price DECIMAL(10,2) -- Unit price charged by supplier
    );

    -- sales.product_id can be joined with products.product_id
    -- sales.customer_id can be joined with customers.customer_id
    -- sales.salesperson_id can be joined with salespeople.salesperson_id
    -- product_suppliers.product_id can be joined with products.product_id
",llama3.2:3b,"[""Write a SQL query to determine the total revenue generated by each salesperson, broken down by the product category (defined by the product name). The query should rank salespeople based on their total revenue generated from each product category, showing the top 3 salespeople for each product category. Use aliases to clearly identify the results and ensure the output includes the salesperson's name, product name, and the total revenue generated for that product category.\n""]","SELECT s.name, p.name AS product_name, SUM(p.price * s.quantity) AS revenue, ROW_NUMBER() OVER (PARTITION BY p.name ORDER BY SUM(s.quantity * p.price) DESC) AS rank FROM sales s LEFT JOIN products p ON s.product_id = p.product_id GROUP BY s.name, p.name",8
10,"    
    CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, auto-incremented
    supplier_name VARCHAR(100) NOT NULL, -- Name of the supplier company or entity
    contact_info VARCHAR(100), -- Contact details (e.g., phone, email) of the supplier
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Date and time when the supplier record was created
);

CREATE TABLE drug_category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each drug category, auto-incremented
    category_name VARCHAR(50) NOT NULL -- Name of the drug category (e.g., Antibiotics, Painkillers)
);

CREATE TABLE drug (
    drug_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each drug, auto-incremented
    category_id INT, -- ID of the category this drug belongs to
    drug_name VARCHAR(100) NOT NULL, -- Name of the drug (e.g., Amoxicillin)
    manufacturer VARCHAR(100), -- Name of the company that produces the drug
    price DECIMAL(10,2), -- Price per unit of the drug
    stock INT -- Current stock quantity of the drug in inventory
);

CREATE TABLE pharmacy (
    pharmacy_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each pharmacy, auto-incremented
    pharmacy_name VARCHAR(100) NOT NULL, -- Name of the pharmacy
    location VARCHAR(100), -- Physical location or address of the pharmacy
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Date and time when the pharmacy record was created
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, auto-incremented
    pharmacy_id INT, -- ID of the pharmacy where the employee works
    first_name VARCHAR(50), -- Employee's first name
    last_name VARCHAR(50), -- Employee's last name
    role VARCHAR(50) -- Employee's job role (e.g., Pharmacist, Cashier)
);

CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, auto-incremented
    pharmacy_id INT, -- ID of the pharmacy where the sale occurred
    employee_id INT, -- ID of the employee who made the sale
    sale_date DATE, -- Date the sale took place
    total_amount DECIMAL(10,2) -- Total monetary amount of the sale
);

CREATE TABLE sale_details (
    sale_detail_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale detail entry, auto-incremented
    sale_id INT, -- ID of the sale this detail belongs to
    drug_id INT, -- ID of the drug sold
    quantity INT, -- Number of units of the drug sold
    subtotal DECIMAL(10,2) -- Total cost for this drug in the sale (quantity * price)
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, auto-incremented
    drug_id INT, -- ID of the drug being tracked
    supplier_id INT, -- ID of the supplier providing the drug
    stock_level INT, -- Current stock level of the drug from this supplier
    last_updated DATE -- Date when the stock level was last updated
);

CREATE TABLE prescription (
    prescription_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each prescription, auto-incremented
    sale_id INT, -- ID of the sale associated with this prescription
    doctor_name VARCHAR(100), -- Name of the doctor who issued the prescription
    prescription_date DATE -- Date the prescription was issued
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, auto-incremented
    pharmacy_id INT, -- ID of the pharmacy receiving the feedback
    rating INT CHECK (rating >= 1 AND rating <= 5), -- Customer rating (1 to 5 stars)
    comments TEXT, -- Customer comments or notes
    feedback_date DATE -- Date the feedback was submitted
);",gemma3:4b,"[""Write a SQL query to identify all pharmacies that have provided feedback with a rating of 5 and also sell drugs that belong to the 'Antibiotics' category. Return the pharmacy names and the average rating given by those pharmacies. Use appropriate joins and aliases to achieve this.\n""]","```sql
SELECT
  p.pharmacy_name,
  AVG(f.rating) AS average_rating
FROM pharmacy AS p
JOIN feedback AS f
  ON p.pharmacy_id = f.pharmacy_id
JOIN drug_category AS dc
  ON p.pharmacy_id IN (
    SELECT
      pharmacy_id
    FROM sale_details
    JOIN sales
      ON sale_details.sale_id = sales.sale_id
    JOIN pharmacy
      ON sales.pharmacy_id = pharmacy.pharmacy_id
    JOIN drug
      ON sale_details.drug_id = drug.drug_id
    WHERE
      dc.category_name = 'Antibiotics'
  )
WHERE
  f.rating = 5
GROUP BY
  p.pharmacy_name;
```",2
11,"CREATE TABLE store (
    store_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each store, automatically incremented
    store_name VARCHAR(50) NOT NULL, -- Name of the store
    location VARCHAR(100) -- Physical location or address of the store
);

CREATE TABLE department (
    department_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each department, automatically incremented
    department_name VARCHAR(50) NOT NULL -- Name of the department (e.g., Electronics, Clothing)
);

CREATE TABLE category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product category, automatically incremented
    category_name VARCHAR(50) NOT NULL -- Name of the product category (e.g., TVs, Shirts)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    category_id INT, -- ID of the category this product belongs to
    product_name VARCHAR(100), -- Name of the product (e.g., ""LED TV 55-inch"")
    price DECIMAL(10,2), -- Price per unit of the product
    FOREIGN KEY (category_id) REFERENCES category(category_id) -- Links to category table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    store_id INT, -- ID of the store where the employee works
    department_id INT, -- ID of the department the employee is assigned to
    first_name VARCHAR(50), -- Employee's first name
    last_name VARCHAR(50), -- Employee's last name
    FOREIGN KEY (store_id) REFERENCES store(store_id), -- Links to store table
    FOREIGN KEY (department_id) REFERENCES department(department_id) -- Links to department table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    email VARCHAR(100) -- Customer's email address
);

CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    store_id INT, -- ID of the store where the sale occurred
    employee_id INT, -- ID of the employee who processed the sale
    customer_id INT, -- ID of the customer who made the purchase
    sale_date DATETIME, -- Date and time when the sale took place
    total_amount DECIMAL(10,2), -- Total monetary amount of the sale
    FOREIGN KEY (store_id) REFERENCES store(store_id), -- Links to store table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id), -- Links to employee table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);

CREATE TABLE sale_items (
    sale_item_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale item, automatically incremented
    sale_id INT, -- ID of the sale this item belongs to
    product_id INT, -- ID of the product sold
    quantity INT, -- Number of units of the product sold
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific product in the sale
    FOREIGN KEY (sale_id) REFERENCES sales(sale_id), -- Links to sales table
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE stock (
    stock_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each stock record, automatically incremented
    product_id INT, -- ID of the product being tracked
    store_id INT, -- ID of the store holding this stock
    quantity INT, -- Current stock quantity of the product at the store
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (store_id) REFERENCES store(store_id) -- Links to store table
);






-- product.category_id can be joined with category.category_id -- Connects each product to its category.
-- employee.store_id can be joined with store.store_id -- Associates employees with the store they work at.
-- employee.department_id can be joined with department.department_id -- Links employees to their assigned department.
-- sales.store_id can be joined with store.store_id -- Ties sales to the store where they occurred.
-- sales.employee_id can be joined with employee.employee_id -- Connects sales to the employee who processed them.
-- sales.customer_id can be joined with customer.customer_id -- Links sales to the customer who made the purchase.
-- sale_items.sale_id can be joined with sales.sale_id -- Associates sale items with their corresponding sale.
-- sale_items.product_id can be joined with product.product_id -- Connects sale items to the specific product sold.
-- stock.product_id can be joined with product.product_id -- Ties stock records to the products they track.
-- stock.store_id can be joined with store.store_id -- Links stock records to the store holding the inventory.",gemma3:4b,"['   Generate a SQL query to determine the total revenue generated by each store, ranked in descending order based on that revenue. The query should include the store name and the total revenue for each store.  Use aliases to improve readability and ensure the query accurately reflects the desired output.\n']","```sql
SELECT
  s.store_name,
  SUM(si.quantity * p.price) AS total_revenue
FROM store AS s
JOIN sale_items AS si
  ON s.store_id = si.product_id
JOIN product AS p
  ON si.product_id = p.product_id
GROUP BY
  s.store_name
ORDER BY
  total_revenue DESC;
```",7
12,"CREATE TABLE user (
    user_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each user, automatically incremented
    username VARCHAR(50) UNIQUE, -- Unique username chosen by the user
    email VARCHAR(100), -- User's email address
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Date and time when the user account was created
);

CREATE TABLE category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product category, automatically incremented
    category_name VARCHAR(50) -- Name of the product category (e.g., Electronics, Clothing)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    category_id INT, -- ID of the category this product belongs to
    product_name VARCHAR(100), -- Name of the product (e.g., ""Wireless Mouse"")
    price DECIMAL(10,2), -- Price per unit of the product
    stock INT -- Current stock quantity of the product
    FOREIGN KEY (category_id) REFERENCES category(category_id) -- Links to category table
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    user_id INT, -- ID of the user who placed the order
    order_date DATETIME, -- Date and time when the order was placed
    status ENUM('PENDING', 'SHIPPED', 'DELIVERED'), -- Current status of the order
    total_amount DECIMAL(10,2), -- Total monetary amount of the order
    FOREIGN KEY (user_id) REFERENCES user(user_id) -- Links to user table
);

CREATE TABLE order_item (
    order_item_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order item, automatically incremented
    order_id INT, -- ID of the order this item belongs to
    product_id INT, -- ID of the product ordered
    quantity INT, -- Number of units of the product ordered
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific product in the order
    FOREIGN KEY (order_id) REFERENCES order_(order_id), -- Links to order_ table
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE payment (
    payment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each payment, automatically incremented
    order_id INT, -- ID of the order associated with this payment
    amount DECIMAL(10,2), -- Amount paid for the order
    payment_date DATETIME, -- Date and time when the payment was made
    method ENUM('CARD', 'PAYPAL', 'COD'), -- Payment method used (Credit Card, PayPal, Cash on Delivery)
    FOREIGN KEY (order_id) REFERENCES order_(order_id) -- Links to order_ table
);

CREATE TABLE shipping (
    shipping_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each shipping record, automatically incremented
    order_id INT, -- ID of the order being shipped
    shipping_date DATE, -- Date when the order was shipped
    tracking_number VARCHAR(50), -- Tracking number for the shipment
    FOREIGN KEY (order_id) REFERENCES order_(order_id) -- Links to order_ table
);

CREATE TABLE review (
    review_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each review, automatically incremented
    product_id INT, -- ID of the product being reviewed
    user_id INT, -- ID of the user who wrote the review
    rating INT, -- Rating given by the user (e.g., 1 to 5)
    comment TEXT, -- Text comment or feedback about the product
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (user_id) REFERENCES user(user_id) -- Links to user table
);



-- product.category_id can be joined with category.category_id -- Connects each product to its category.
-- order_.user_id can be joined with user.user_id -- Ties orders to the user who placed them.
-- order_item.order_id can be joined with order_.order_id -- Links order items to their corresponding order.
-- order_item.product_id can be joined with product.product_id -- Connects order items to the specific product ordered.
-- payment.order_id can be joined with order_.order_id -- Associates payments with the order they cover.
-- shipping.order_id can be joined with order_.order_id -- Links shipping records to the order being shipped.
-- review.product_id can be joined with product.product_id -- Ties reviews to the product being reviewed.
-- review.user_id can be joined with user.user_id -- Connects reviews to the user who wrote them.",gemma3:4b,"['  \n   Generate a SQL query to determine the average order value for each product category, including the category name and the average total amount of all orders containing products from that category.  Present the results sorted in descending order of the average order value. Use appropriate aliases to enhance readability.\n']","```sql
SELECT 
    c.category_name,
    AVG(oi.subtotal) AS average_order_value
FROM category AS c
JOIN product AS p 
    ON c.category_id = p.category_id
JOIN order_item AS oi
    ON p.product_id = oi.product_id
GROUP BY c.category_name
ORDER BY average_order_value DESC;
```",8
13,"CREATE TABLE agent (
    agent_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each agent, automatically incremented
    first_name VARCHAR(50), -- Agent's first name
    last_name VARCHAR(50), -- Agent's last name
    phone VARCHAR(20) -- Agent's phone number
);

CREATE TABLE property_type (
    type_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each property type, automatically incremented
    type_name VARCHAR(50) NOT NULL -- Name of the property type (e.g., House, Apartment)
);

CREATE TABLE property (
    property_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each property, automatically incremented
    type_id INT, -- ID of the property type this property belongs to
    address TEXT, -- Full address of the property
    price DECIMAL(12,2), -- Listed price of the property
    status ENUM('AVAILABLE', 'SOLD', 'PENDING'), -- Current status of the property
    FOREIGN KEY (type_id) REFERENCES property_type(type_id) -- Links to property_type table
);

CREATE TABLE client (
    client_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each client, automatically incremented
    first_name VARCHAR(50), -- Client's first name
    last_name VARCHAR(50), -- Client's last name
    email VARCHAR(100) -- Client's email address
);

CREATE TABLE sale (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    property_id INT, -- ID of the property sold
    agent_id INT, -- ID of the agent who facilitated the sale
    client_id INT, -- ID of the client who purchased the property
    sale_date DATE, -- Date when the sale was completed
    sale_price DECIMAL(12,2), -- Final sale price of the property
    FOREIGN KEY (property_id) REFERENCES property(property_id), -- Links to property table
    FOREIGN KEY (agent_id) REFERENCES agent(agent_id), -- Links to agent table
    FOREIGN KEY (client_id) REFERENCES client(client_id) -- Links to client table
);

CREATE TABLE commission (
    commission_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each commission record, automatically incremented
    sale_id INT, -- ID of the sale this commission is tied to
    agent_id INT, -- ID of the agent receiving the commission
    amount DECIMAL(10,2), -- Commission amount earned by the agent
    FOREIGN KEY (sale_id) REFERENCES sale(sale_id), -- Links to sale table
    FOREIGN KEY (agent_id) REFERENCES agent(agent_id) -- Links to agent table
);

CREATE TABLE appointment (
    appointment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each appointment, automatically incremented
    agent_id INT, -- ID of the agent conducting the appointment
    client_id INT, -- ID of the client attending the appointment
    property_id INT, -- ID of the property being shown or discussed
    appointment_date DATETIME, -- Date and time of the appointment
    FOREIGN KEY (agent_id) REFERENCES agent(agent_id), -- Links to agent table
    FOREIGN KEY (client_id) REFERENCES client(client_id), -- Links to client table
    FOREIGN KEY (property_id) REFERENCES property(property_id) -- Links to property table
);

CREATE TABLE expense (
    expense_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each expense record, automatically incremented
    property_id INT, -- ID of the property associated with the expense
    amount DECIMAL(10,2), -- Amount of the expense
    description TEXT, -- Details or reason for the expense (e.g., repairs, marketing)
    expense_date DATE, -- Date when the expense was incurred
    FOREIGN KEY (property_id) REFERENCES property(property_id) -- Links to property table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    client_id INT, -- ID of the client providing the feedback
    rating INT, -- Rating given by the client (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the client
    FOREIGN KEY (client_id) REFERENCES client(client_id) -- Links to client table
);


-- property.type_id can be joined with property_type.type_id -- Connects each property to its type.
-- sale.property_id can be joined with property.property_id -- Ties sales to the property sold.
-- sale.agent_id can be joined with agent.agent_id -- Links sales to the agent who facilitated them.
-- sale.client_id can be joined with client.client_id -- Connects sales to the client who purchased the property.
-- commission.sale_id can be joined with sale.sale_id -- Associates commissions with their corresponding sale.
-- commission.agent_id can be joined with agent.agent_id -- Links commissions to the agent receiving them.
-- appointment.agent_id can be joined with agent.agent_id -- Ties appointments to the agent conducting them.
-- appointment.client_id can be joined with client.client_id -- Connects appointments to the client attending them.
-- appointment.property_id can be joined with property.property_id -- Links appointments to the property being shown.
-- expense.property_id can be joined with property.property_id -- Associates expenses with the property they relate to.
-- feedback.client_id can be joined with client.client_id -- Connects feedback to the client providing it.",gemma3:4b,"[""  \n   Generate a SQL query to determine the average commission amount earned by agents who facilitated sales of properties located in a specific city (assuming a `city` column exists within the `property` table).  The query should also display the agent's first name and last name, and the total number of sales they facilitated during the same period. Use aliases to improve readability.  The period is defined as sales occurring between '2023-01-01' and '2023-12-31'.\n""]","```sql
SELECT
  A.first_name,
  A.last_name,
  COUNT(S.sale_id) AS total_sales
FROM agent AS A
JOIN sale AS S
  ON A.agent_id = S.agent_id
WHERE
  S.sale_date BETWEEN '2023-01-01' AND '2023-12-31'
GROUP BY
  A.agent_id
HAVING
  A.agent_id IN (
    SELECT
      agent_id
    FROM sale
    WHERE
      property_id IN (
        SELECT
          property_id
        FROM property
        WHERE
          address LIKE '%New York%'
      )
    GROUP BY
      agent_id
  );
```",6
14,"CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, automatically incremented
    supplier_name VARCHAR(100), -- Name of the supplier company or entity
    contact VARCHAR(100) -- Contact information for the supplier (e.g., phone, email)
);

CREATE TABLE raw_material (
    material_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each raw material, automatically incremented
    material_name VARCHAR(100), -- Name of the raw material (e.g., Steel, Cotton)
    unit_cost DECIMAL(10,2) -- Cost per unit of the raw material
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    product_name VARCHAR(100), -- Name of the product (e.g., ""Steel Table"")
    sale_price DECIMAL(10,2) -- Price at which the product is sold per unit
);

CREATE TABLE production (
    production_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each production batch, automatically incremented
    product_id INT, -- ID of the product being produced
    production_date DATE, -- Date when the production occurred
    quantity INT, -- Number of units produced in this batch
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    role VARCHAR(50) -- Employee's job role (e.g., Salesperson, Production Worker)
);

CREATE TABLE sales (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    product_id INT, -- ID of the product sold
    employee_id INT, -- ID of the employee who made the sale
    sale_date DATE, -- Date when the sale took place
    quantity_sold INT, -- Number of units sold
    total_amount DECIMAL(10,2), -- Total monetary amount of the sale
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, automatically incremented
    material_id INT, -- ID of the raw material being tracked
    stock_level INT, -- Current stock quantity of the raw material
    FOREIGN KEY (material_id) REFERENCES raw_material(material_id) -- Links to raw_material table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    company_name VARCHAR(100), -- Name of the customer company or entity
    contact VARCHAR(100) -- Contact information for the customer (e.g., phone, email)
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    customer_id INT, -- ID of the customer who placed the order
    sale_id INT, -- ID of the sale associated with this order
    order_date DATE, -- Date when the order was placed
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (sale_id) REFERENCES sales(sale_id) -- Links to sales table
);


-- production.product_id can be joined with product.product_id -- Connects production batches to the product being produced.
-- sales.product_id can be joined with product.product_id -- Ties sales to the product sold.
-- sales.employee_id can be joined with employee.employee_id -- Links sales to the employee who made them.
-- inventory.material_id can be joined with raw_material.material_id -- Associates inventory records with the raw materials they track.
-- order_.customer_id can be joined with customer.customer_id -- Connects orders to the customer who placed them.
-- order_.sale_id can be joined with sales.sale_id -- Links orders to their corresponding sale.",gemma3:4b,"[""Generate a report showing the total sales revenue for each product, along with the employee who made the sale and the customer who placed the order for that sale. The report should also include the product name, sale price, total amount, employee's first name, employee's role, customer's company name, and the sale date. Use appropriate joins and aliases to connect the `sales`, `product`, `employee`, `customer`, and `order_` tables.  The output should be sorted by total sales revenue in descending order.\n""]","```sql
SELECT
  p.product_name,
  s.total_amount,
  e.first_name,
  e.role,
  c.company_name,
  s.sale_date
FROM sales AS s
JOIN product AS p
  ON s.product_id = p.product_id
JOIN employee AS e
  ON s.employee_id = e.employee_id
JOIN customer AS c
  ON s.sale_id IN (
    SELECT
      order_id
    FROM order_
    WHERE
      customer_id = c.customer_id
  )
ORDER BY
  s.total_amount DESC;
```",6
15,"CREATE TABLE restaurant (
    restaurant_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each restaurant, automatically incremented
    name VARCHAR(100), -- Name of the restaurant
    location VARCHAR(100) -- Physical location or address of the restaurant
);

CREATE TABLE menu_category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each menu category, automatically incremented
    category_name VARCHAR(50) -- Name of the menu category (e.g., Appetizers, Desserts)
);

CREATE TABLE menu_item (
    item_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each menu item, automatically incremented
    category_id INT, -- ID of the category this menu item belongs to
    item_name VARCHAR(100), -- Name of the menu item (e.g., ""Chicken Wings"")
    price DECIMAL(10,2), -- Price of the menu item
    FOREIGN KEY (category_id) REFERENCES menu_category(category_id) -- Links to menu_category table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    restaurant_id INT, -- ID of the restaurant where the employee works
    first_name VARCHAR(50), -- Employee's first name
    role VARCHAR(50) -- Employee's job role (e.g., Waiter, Chef)
    FOREIGN KEY (restaurant_id) REFERENCES restaurant(restaurant_id) -- Links to restaurant table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    email VARCHAR(100) -- Customer's email address
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    restaurant_id INT, -- ID of the restaurant where the order was placed
    employee_id INT, -- ID of the employee who processed the order
    customer_id INT, -- ID of the customer who placed the order
    order_date DATETIME, -- Date and time when the order was placed
    total_amount DECIMAL(10,2), -- Total monetary amount of the order
    FOREIGN KEY (restaurant_id) REFERENCES restaurant(restaurant_id), -- Links to restaurant table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id), -- Links to employee table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);

CREATE TABLE order_detail (
    order_detail_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order detail, automatically incremented
    order_id INT, -- ID of the order this detail belongs to
    item_id INT, -- ID of the menu item ordered
    quantity INT, -- Number of units of the menu item ordered
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific menu item in the order
    FOREIGN KEY (order_id) REFERENCES order_(order_id), -- Links to order_ table
    FOREIGN KEY (item_id) REFERENCES menu_item(item_id) -- Links to menu_item table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    customer_id INT, -- ID of the customer providing the feedback
    restaurant_id INT, -- ID of the restaurant being reviewed
    rating INT, -- Rating given by the customer (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the customer
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (restaurant_id) REFERENCES restaurant(restaurant_id) -- Links to restaurant table
);


-- menu_item.category_id can be joined with menu_category.category_id -- Connects each menu item to its category.
-- employee.restaurant_id can be joined with restaurant.restaurant_id -- Ties employees to the restaurant they work at.
-- order_.restaurant_id can be joined with restaurant.restaurant_id -- Links orders to the restaurant where they were placed.
-- order_.employee_id can be joined with employee.employee_id -- Connects orders to the employee who processed them.
-- order_.customer_id can be joined with customer.customer_id -- Associates orders with the customer who placed them.
-- order_detail.order_id can be joined with order_.order_id -- Ties order details to their corresponding order.
-- order_detail.item_id can be joined with menu_item.item_id -- Links order details to the specific menu item ordered.
-- feedback.customer_id can be joined with customer.customer_id -- Connects feedback to the customer providing it.
-- feedback.restaurant_id can be joined with restaurant.restaurant_id -- Associates feedback with the restaurant being reviewed.",gemma3:4b,"['Write a SQL query to identify all restaurants that have received at least five positive feedback ratings (rating of 4 or 5) from customers, along with the average rating given by those customers. Use aliases to clearly distinguish between tables and columns in your query.\n']","```sql
SELECT
  r.name,
  AVG(CAST(f.rating AS FLOAT)) AS average_rating
FROM restaurant AS r
JOIN feedback AS f
  ON r.restaurant_id = f.restaurant_id
WHERE
  f.rating >= 4
GROUP BY
  r.name
HAVING
  COUNT(*) >= 5;
```",9
16,"CREATE TABLE vehicle_type (
    type_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each vehicle type, automatically incremented
    type_name VARCHAR(50) -- Name of the vehicle type (e.g., Sedan, Truck)
);

CREATE TABLE vehicle (
    vehicle_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each vehicle, automatically incremented
    type_id INT, -- ID of the vehicle type this vehicle belongs to
    model VARCHAR(100), -- Model name of the vehicle (e.g., ""Camry"")
    manufacturer VARCHAR(50), -- Name of the vehicle manufacturer (e.g., ""Toyota"")
    price DECIMAL(12,2), -- Price of the vehicle
    stock INT, -- Current stock quantity of the vehicle
    FOREIGN KEY (type_id) REFERENCES vehicle_type(type_id) -- Links to vehicle_type table
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    last_name VARCHAR(50), -- Customer's last name
    email VARCHAR(100) -- Customer's email address
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    last_name VARCHAR(50), -- Employee's last name
    role VARCHAR(50) -- Employee's job role (e.g., Salesperson, Mechanic)
);

CREATE TABLE sale (
    sale_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each sale, automatically incremented
    vehicle_id INT, -- ID of the vehicle sold
    customer_id INT, -- ID of the customer who purchased the vehicle
    employee_id INT, -- ID of the employee who facilitated the sale
    sale_date DATE, -- Date when the sale occurred
    sale_price DECIMAL(12,2), -- Final sale price of the vehicle
    FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id), -- Links to vehicle table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE service (
    service_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each service record, automatically incremented
    vehicle_id INT, -- ID of the vehicle being serviced
    customer_id INT, -- ID of the customer requesting the service
    service_date DATE, -- Date when the service was performed
    cost DECIMAL(10,2), -- Cost of the service
    FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id), -- Links to vehicle table
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);

CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, automatically incremented
    supplier_name VARCHAR(100), -- Name of the supplier company or entity
    contact VARCHAR(100) -- Contact information for the supplier (e.g., phone, email)
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, automatically incremented
    vehicle_id INT, -- ID of the vehicle being tracked
    supplier_id INT, -- ID of the supplier providing the vehicle
    stock_level INT, -- Current stock level of the vehicle
    FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id), -- Links to vehicle table
    FOREIGN KEY (supplier_id) REFERENCES supplier(supplier_id) -- Links to supplier table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    customer_id INT, -- ID of the customer providing the feedback
    rating INT, -- Rating given by the customer (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the customer
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);




-- vehicle.type_id can be joined with vehicle_type.type_id -- Connects each vehicle to its type.
-- sale.vehicle_id can be joined with vehicle.vehicle_id -- Ties sales to the vehicle sold.
-- sale.customer_id can be joined with customer.customer_id -- Links sales to the customer who purchased the vehicle.
-- sale.employee_id can be joined with employee.employee_id -- Associates sales with the employee who facilitated them.
-- service.vehicle_id can be joined with vehicle.vehicle_id -- Connects service records to the vehicle being serviced.
-- service.customer_id can be joined with customer.customer_id -- Links service records to the customer requesting them.
-- inventory.vehicle_id can be joined with vehicle.vehicle_id -- Ties inventory records to the vehicle being tracked.
-- inventory.supplier_id can be joined with supplier.supplier_id -- Associates inventory with the supplier providing the vehicle.
-- feedback.customer_id can be joined with customer.customer_id -- Connects feedback to the customer providing it.-- ",gemma3:4b,"['  \n   Generate a SQL query to determine the total revenue generated by each vehicle type, considering only sales made between January 1, 2023, and December 31, 2023. The query should rank the vehicle types based on their total revenue, with the highest revenue vehicle type appearing first. Use appropriate aliases to enhance readability and ensure accurate results.\n']","```sql
SELECT
  vt.type_name,
  SUM(s.sale_price) AS total_revenue
FROM vehicle_type AS vt
JOIN vehicle AS v
  ON vt.type_id = v.type_id
JOIN sale AS s
  ON v.vehicle_id = s.vehicle_id
WHERE
  s.sale_date BETWEEN '2023-01-01' AND '2023-12-31'
GROUP BY
  vt.type_name
ORDER BY
  total_revenue DESC;
```",9
17,"CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    first_name VARCHAR(50), -- Customer's first name
    email VARCHAR(100) UNIQUE -- Customer's unique email address
);

CREATE TABLE plan (
    plan_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each subscription plan, automatically incremented
    plan_name VARCHAR(50), -- Name of the plan (e.g., ""Basic"", ""Premium"")
    monthly_price DECIMAL(10,2) -- Monthly cost of the plan
);

CREATE TABLE subscription (
    subscription_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each subscription, automatically incremented
    customer_id INT, -- ID of the customer who subscribed
    plan_id INT, -- ID of the plan subscribed to
    start_date DATE, -- Date when the subscription began
    end_date DATE, -- Date when the subscription ends (if applicable)
    status ENUM('ACTIVE', 'CANCELLED'), -- Current status of the subscription
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (plan_id) REFERENCES plan(plan_id) -- Links to plan table
);

CREATE TABLE payment (
    payment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each payment, automatically incremented
    subscription_id INT, -- ID of the subscription this payment is for
    amount DECIMAL(10,2), -- Amount paid
    payment_date DATE, -- Date when the payment was made
    method ENUM('CARD', 'PAYPAL', 'BANK'), -- Payment method used (Credit Card, PayPal, Bank Transfer)
    FOREIGN KEY (subscription_id) REFERENCES subscription(subscription_id) -- Links to subscription table
);

CREATE TABLE usage (
    usage_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each usage record, automatically incremented
    subscription_id INT, -- ID of the subscription this usage pertains to
    usage_date DATE, -- Date when the usage was recorded
    metric_value INT, -- Measured value of usage (e.g., data in MB, minutes used)
    FOREIGN KEY (subscription_id) REFERENCES subscription(subscription_id) -- Links to subscription table
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    role VARCHAR(50) -- Employee's job role (e.g., Support Agent, Manager)
);

CREATE TABLE support_ticket (
    ticket_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each support ticket, automatically incremented
    customer_id INT, -- ID of the customer who raised the ticket
    employee_id INT, -- ID of the employee handling the ticket
    issue TEXT, -- Description of the customer's issue
    status ENUM('OPEN', 'CLOSED'), -- Current status of the ticket
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE feedback (
    feedback_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each feedback entry, automatically incremented
    customer_id INT, -- ID of the customer providing the feedback
    rating INT, -- Rating given by the customer (e.g., 1 to 5)
    comments TEXT, -- Additional comments or notes from the customer
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id) -- Links to customer table
);



-- subscription.customer_id can be joined with customer.customer_id -- Connects subscriptions to the customer who subscribed.
-- subscription.plan_id can be joined with plan.plan_id -- Links subscriptions to the specific plan subscribed to.
-- payment.subscription_id can be joined with subscription.subscription_id -- Ties payments to their corresponding subscription.
-- usage.subscription_id can be joined with subscription.subscription_id -- Associates usage records with the subscription they pertain to.
-- support_ticket.customer_id can be joined with customer.customer_id -- Links support tickets to the customer who raised them.
-- support_ticket.employee_id can be joined with employee.employee_id -- Connects support tickets to the employee handling them.
-- feedback.customer_id can be joined with customer.customer_id -- Ties feedback to the customer providing it.-- ",gemma3:4b,"[""Write a SQL query to identify the top 3 customers who have spent the most money on subscriptions, considering only active subscriptions. The query should return the customer's first name, email, and the total amount spent on subscriptions. Use aliases to clarify column names and join the `subscription`, `payment`, and `customer` tables. Order the results by the total amount spent in descending order.\n""]","```sql
SELECT
  c.first_name,
  c.email,
  SUM(p.amount) AS total_spent
FROM customer AS c
JOIN subscription AS s
  ON c.customer_id = s.customer_id
JOIN payment AS p
  ON s.subscription_id = p.subscription_id
WHERE
  s.status = 'ACTIVE'
GROUP BY
  c.customer_id,
  c.first_name,
  c.email
ORDER BY
  total_spent DESC
LIMIT 3;
```",9
18,"CREATE TABLE warehouse (
    warehouse_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each warehouse, automatically incremented
    location VARCHAR(100), -- Physical location or address of the warehouse
    capacity INT -- Maximum storage capacity of the warehouse (e.g., in units or volume)
);

CREATE TABLE product_category (
    category_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product category, automatically incremented
    category_name VARCHAR(50) -- Name of the product category (e.g., Electronics, Furniture)
);

CREATE TABLE product (
    product_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each product, automatically incremented
    category_id INT, -- ID of the category this product belongs to
    product_name VARCHAR(100), -- Name of the product (e.g., ""LED TV"")
    wholesale_price DECIMAL(10,2), -- Wholesale price per unit of the product
    FOREIGN KEY (category_id) REFERENCES product_category(category_id) -- Links to product_category table
);

CREATE TABLE supplier (
    supplier_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each supplier, automatically incremented
    supplier_name VARCHAR(100), -- Name of the supplier company or entity
    contact VARCHAR(100) -- Contact information for the supplier (e.g., phone, email)
);

CREATE TABLE customer (
    customer_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each customer, automatically incremented
    company_name VARCHAR(100), -- Name of the customer company or entity
    contact VARCHAR(100) -- Contact information for the customer (e.g., phone, email)
);

CREATE TABLE employee (
    employee_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each employee, automatically incremented
    first_name VARCHAR(50), -- Employee's first name
    warehouse_id INT, -- ID of the warehouse where the employee works
    role VARCHAR(50), -- Employee's job role (e.g., Warehouse Manager, Order Picker)
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(warehouse_id) -- Links to warehouse table
);

CREATE TABLE order_ (
    order_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order, automatically incremented
    customer_id INT, -- ID of the customer who placed the order
    warehouse_id INT, -- ID of the warehouse fulfilling the order
    employee_id INT, -- ID of the employee who processed the order
    order_date DATE, -- Date when the order was placed
    total_amount DECIMAL(10,2), -- Total monetary amount of the order
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id), -- Links to customer table
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(warehouse_id), -- Links to warehouse table
    FOREIGN KEY (employee_id) REFERENCES employee(employee_id) -- Links to employee table
);

CREATE TABLE order_detail (
    order_detail_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each order detail, automatically incremented
    order_id INT, -- ID of the order this detail belongs to
    product_id INT, -- ID of the product ordered
    quantity INT, -- Number of units of the product ordered
    subtotal DECIMAL(10,2), -- Subtotal amount for this specific product in the order
    FOREIGN KEY (order_id) REFERENCES order_(order_id), -- Links to order_ table
    FOREIGN KEY (product_id) REFERENCES product(product_id) -- Links to product table
);

CREATE TABLE inventory (
    inventory_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each inventory record, automatically incremented
    product_id INT, -- ID of the product being tracked
    warehouse_id INT, -- ID of the warehouse storing the product
    supplier_id INT, -- ID of the supplier providing the product
    stock_level INT, -- Current stock quantity of the product in the warehouse
    FOREIGN KEY (product_id) REFERENCES product(product_id), -- Links to product table
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(warehouse_id), -- Links to warehouse table
    FOREIGN KEY (supplier_id) REFERENCES supplier(supplier_id) -- Links to supplier table
);

CREATE TABLE shipment (
    shipment_id INT PRIMARY KEY AUTO_INCREMENT, -- Unique ID for each shipment, automatically incremented
    order_id INT, -- ID of the order being shipped
    shipment_date DATE, -- Date when the shipment was sent
    tracking_number VARCHAR(50), -- Tracking number for the shipment
    FOREIGN KEY (order_id) REFERENCES order_(order_id) -- Links to order_ table
);




-- product.category_id can be joined with product_category.category_id -- Connects each product to its category.
-- employee.warehouse_id can be joined with warehouse.warehouse_id -- Ties employees to the warehouse they work at.
-- order_.customer_id can be joined with customer.customer_id -- Links orders to the customer who placed them.
-- order_.warehouse_id can be joined with warehouse.warehouse_id -- Associates orders with the warehouse fulfilling them.
-- order_.employee_id can be joined with employee.employee_id -- Connects orders to the employee who processed them.
-- order_detail.order_id can be joined with order_.order_id -- Ties order details to their corresponding order.
-- order_detail.product_id can be joined with product.product_id -- Links order details to the specific product ordered.
-- inventory.product_id can be joined with product.product_id -- Associates inventory records with the product being tracked.
-- inventory.warehouse_id can be joined with warehouse.warehouse_id -- Connects inventory to the warehouse storing it.
-- inventory.supplier_id can be joined with supplier.supplier_id -- Links inventory to the supplier providing the product.
-- shipment.order_id can be joined with order_.order_id -- Ties shipments to the order being shipped.-- ",gemma3:4b,"[""Write a SQL query to identify all products that have been ordered more than 5 times and are stocked in warehouses located in 'New York'. Return the product names and the number of times each product has been ordered.  Use aliases to clarify the table names in your query.\n""]","```sql
SELECT
  p.product_name,
  COUNT(od.order_id) AS order_count
FROM product AS p
JOIN order_detail AS od
  ON p.product_id = od.product_id
WHERE
  p.category_id IN (
    SELECT
      category_id
    FROM product_category
    WHERE
      category_name = 'New York'
  )
GROUP BY
  p.product_name
HAVING
  COUNT(od.order_id) > 5;
```",6
19,"    CREATE TABLE products (
    product_id INTEGER PRIMARY KEY, -- Unique ID for each product
    name VARCHAR(50), -- Name of the product
    price DECIMAL(10,2), -- Price of each unit of the product
    quantity INTEGER  -- Current quantity in stock
    );

    CREATE TABLE customers (
    customer_id INTEGER PRIMARY KEY, -- Unique ID for each customer
    name VARCHAR(50), -- Name of the customer
    address VARCHAR(100) -- Mailing address of the customer
    );

    CREATE TABLE salespeople (
    salesperson_id INTEGER PRIMARY KEY, -- Unique ID for each salesperson
    name VARCHAR(50), -- Name of the salesperson
    region VARCHAR(50) -- Geographic sales region
    );

    CREATE TABLE sales (
    sale_id INTEGER PRIMARY KEY, -- Unique ID for each sale
    product_id INTEGER, -- ID of product sold
    customer_id INTEGER,  -- ID of customer who made purchase
    salesperson_id INTEGER, -- ID of salesperson who made the sale
    sale_date DATE, -- Date the sale occurred
    quantity INTEGER -- Quantity of product sold
    );

    CREATE TABLE product_suppliers (
    supplier_id INTEGER PRIMARY KEY, -- Unique ID for each supplier
    product_id INTEGER, -- Product ID supplied
    supply_price DECIMAL(10,2) -- Unit price charged by supplier
    );

    -- sales.product_id can be joined with products.product_id
    -- sales.customer_id can be joined with customers.customer_id
    -- sales.salesperson_id can be joined with salespeople.salesperson_id
    -- product_suppliers.product_id can be joined with products.product_id
",gemma3:4b,"[""Write a SQL query to determine the total revenue generated by each salesperson, broken down by the product category (defined by the product name). The query should rank salespeople based on their total revenue generated from each product category, showing the top 3 salespeople for each product category. Use aliases to clearly identify the results and ensure the output includes the salesperson's name, product name, and the total revenue generated for that product category.\n""]","```sql
SELECT
  s.name AS salesperson_name,
  p.name AS product_name,
  SUM(CAST(e.quantity AS FLOAT)) AS total_revenue
FROM salespeople AS s
JOIN sales AS e
  ON s.salesperson_id = e.salesperson_id
JOIN products AS p
  ON e.product_id = p.product_id
GROUP BY
  s.name,
  p.name
ORDER BY
  total_revenue DESC
LIMIT 3;
```",3
